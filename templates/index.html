<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>★ Correio da pós-verdade</title>
    <meta name="description" content="Agregador de notícias dos principais jornais brasileiros.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&family=IM+Fell+English:ital@0;1&family=IM+Fell+English+SC&family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <style>
        /* ── Reset & Base ── */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --paper: #f2e8d5;
            --paper2: #e8dcc4;
            --ink: #1a1208;
            --ink-mid: #3a2e1a;
            --ink-faint: #7a6a50;
            --rule: #2a1e0a;
            --red: #8b1a1a;
            --col-gap: 18px;
        }

        body {
            background: #b0a080;
            background-image:
                repeating-linear-gradient(0deg, transparent, transparent 28px, rgba(0, 0, 0, 0.04) 28px, rgba(0, 0, 0, 0.04) 29px);
            font-family: 'Libre Baskerville', Georgia, serif;
            color: var(--ink);
            min-height: 100vh;
            padding: 24px 16px 48px;
        }

        /* ── Paper wrapper ── */
        .newspaper {
            max-width: 1020px;
            margin: 0 auto;
            background: var(--paper);
            background-image:
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E"),
                linear-gradient(to bottom, #f5ead8 0%, #ede0c4 100%);
            box-shadow: 0 4px 40px rgba(0, 0, 0, 0.45), inset 0 0 80px rgba(0, 0, 0, 0.06);
            padding: 0 0 40px;
        }

        /* ── Thick top rule ── */
        .top-rule {
            height: 6px;
            background: var(--rule);
        }

        .top-rule-thin {
            height: 2px;
            background: var(--rule);
            margin-top: 3px;
        }

        /* ── Masthead ── */
        .masthead {
            padding: 18px 32px 0;
            text-align: center;
            border-bottom: 3px double var(--rule);
            padding-bottom: 10px;
        }

        .masthead-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            font-family: 'IM Fell English SC', serif;
            font-size: 0.68rem;
            color: var(--ink-mid);
            letter-spacing: 0.06em;
            margin-bottom: 6px;
        }

        .masthead-title {
            font-family: 'UnifrakturMaguntia', cursive;
            font-size: clamp(3rem, 8vw, 5.5rem);
            line-height: 1;
            color: var(--ink);
            letter-spacing: -1px;
            text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.12);
        }

        .masthead-subtitle {
            font-family: 'IM Fell English SC', serif;
            font-size: 0.72rem;
            letter-spacing: 0.25em;
            color: var(--ink-mid);
            text-transform: uppercase;
            margin-top: 4px;
            border-top: 1px solid var(--rule);
            border-bottom: 1px solid var(--rule);
            padding: 3px 0;
        }

        .masthead-dateline {
            display: flex;
            justify-content: space-between;
            font-family: 'IM Fell English SC', serif;
            font-size: 0.65rem;
            color: var(--ink-mid);
            letter-spacing: 0.05em;
            margin-top: 6px;
        }

        /* ── Search / Filter bar ── */
        .controls {
            padding: 10px 32px;
            border-bottom: 2px solid var(--rule);
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            background: var(--paper2);
        }

        .controls label {
            font-family: 'IM Fell English SC', serif;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: var(--ink-mid);
            text-transform: uppercase;
        }

        .controls input[type="text"] {
            background: transparent;
            border: 1px solid var(--ink-mid);
            padding: 4px 10px;
            font-family: 'Libre Baskerville', serif;
            font-size: 0.8rem;
            color: var(--ink);
            width: 180px;
            outline: none;
        }

        .controls input[type="text"]:focus {
            border-color: var(--ink);
            box-shadow: inset 0 0 0 1px var(--ink);
        }

        .controls button {
            background: var(--ink);
            color: var(--paper);
            border: none;
            padding: 5px 14px;
            font-family: 'IM Fell English SC', serif;
            font-size: 0.72rem;
            letter-spacing: 0.08em;
            cursor: pointer;
            text-transform: uppercase;
        }

        .controls button:hover {
            background: var(--red);
        }


        /* ── Headline banner (top story) ── */
        .headline-banner {
            padding: 18px 32px 12px;
            border-bottom: 3px double var(--rule);
            text-align: center;
        }

        .kicker {
            font-family: 'IM Fell English SC', serif;
            font-size: 0.68rem;
            letter-spacing: 0.2em;
            color: var(--red);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .headline-banner h2 {
            font-family: 'Playfair Display', Georgia, serif;
            font-size: clamp(1.6rem, 4vw, 2.6rem);
            font-weight: 900;
            line-height: 1.1;
            color: var(--ink);
            max-width: 700px;
            margin: 0 auto 6px;
        }

        .headline-banner .deck {
            font-family: 'IM Fell English', Georgia, serif;
            font-style: italic;
            font-size: 0.95rem;
            color: var(--ink-mid);
            max-width: 600px;
            margin: 0 auto;
        }

        .headline-banner a {
            color: inherit;
            text-decoration: none;
        }

        .headline-banner a:hover h2 {
            text-decoration: underline;
        }

        /* ── Column grid ── */
        .columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0;
            padding: 0 32px;
            border-bottom: 2px solid var(--rule);
        }

        .col {
            padding: 16px var(--col-gap) 16px 0;
            border-right: 1px solid var(--rule);
        }

        .col:last-child {
            border-right: none;
            padding-right: 0;
        }

        .col:not(:first-child) {
            padding-left: var(--col-gap);
            padding-right: var(--col-gap);
        }

        .col:last-child {
            padding-right: 0;
        }

        /* ── Article card (inside columns) ── */
        .article {
            margin-bottom: 18px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--ink-faint);
        }

        .article:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .article-source {
            font-family: 'IM Fell English SC', serif;
            font-size: 0.6rem;
            letter-spacing: 0.12em;
            color: var(--red);
            text-transform: uppercase;
            margin-bottom: 3px;
        }

        .article h3 {
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 1.05rem;
            font-weight: 700;
            line-height: 1.25;
            margin-bottom: 6px;
        }

        .article h3 a {
            color: var(--ink);
            text-decoration: none;
        }

        .article h3 a:hover {
            text-decoration: underline;
        }

        .article .byline {
            font-family: 'IM Fell English', serif;
            font-style: italic;
            font-size: 0.72rem;
            color: var(--ink-faint);
            margin-bottom: 5px;
        }

        .article p {
            font-size: 0.8rem;
            line-height: 1.65;
            color: var(--ink-mid);
            text-align: justify;
            hyphens: auto;
        }

        /* Drop cap on first article of each column */
        .article.drop-cap p::first-letter {
            font-family: 'Playfair Display', serif;
            font-size: 3.2em;
            font-weight: 900;
            float: left;
            line-height: 0.75;
            margin: 4px 6px 0 0;
            color: var(--ink);
        }

        /* ── Wide two-column section ── */
        .columns-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            padding: 0 32px;
            border-bottom: 2px solid var(--rule);
        }

        .columns-2 .col {
            padding: 14px var(--col-gap) 14px 0;
            border-right: 1px solid var(--rule);
        }

        .columns-2 .col:last-child {
            border-right: none;
            padding-right: 0;
            padding-left: var(--col-gap);
        }

        /* ── Section rule ── */
        .section-rule {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 6px 32px;
            background: var(--ink);
            color: var(--paper);
            font-family: 'IM Fell English SC', serif;
            font-size: 0.68rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        .section-rule::before,
        .section-rule::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--paper);
            opacity: 0.4;
        }

        /* ── Stats bar ── */
        .stats-bar {
            padding: 5px 32px;
            font-family: 'IM Fell English SC', serif;
            font-size: 0.65rem;
            color: var(--ink-faint);
            letter-spacing: 0.06em;
            border-bottom: 1px solid var(--ink-faint);
        }

        /* ── Empty state ── */
        .empty {
            text-align: center;
            padding: 60px 32px;
            font-family: 'IM Fell English', serif;
            font-style: italic;
            color: var(--ink-faint);
            font-size: 1.1rem;
        }

        /* ── Footer ── */
        .footer {
            text-align: center;
            padding: 16px 32px 0;
            font-family: 'IM Fell English SC', serif;
            font-size: 0.62rem;
            letter-spacing: 0.1em;
            color: var(--ink-faint);
            border-top: 3px double var(--rule);
            margin: 0 32px;
        }

        /* ── Ornament ── */
        .ornament {
            text-align: center;
            font-size: 1.1rem;
            color: var(--ink-faint);
            padding: 4px 0;
            letter-spacing: 8px;
        }

        /* ── Responsive ── */
        @media (max-width: 700px) {

            .columns,
            .columns-2 {
                grid-template-columns: 1fr;
                padding: 0 16px;
            }

            .col {
                border-right: none;
                border-bottom: 1px solid var(--rule);
                padding: 14px 0 !important;
            }

            .col:last-child {
                border-bottom: none;
            }

            .masthead,
            .controls,
            .stats-bar,
            .section-rule,
            .footer {
                padding-left: 16px;
                padding-right: 16px;
            }

            .headline-banner {
                padding: 14px 16px 10px;
            }

            .footer {
                margin: 0 16px;
            }
        }
    </style>
</head>

<body>
    <div class="newspaper">

        <div class="top-rule"></div>
        <div class="top-rule-thin"></div>

        <!-- MASTHEAD -->
        <div class="masthead">
            <div class="masthead-top">
                <span>Fundado em MMXXVI</span>
                <span>★ A Voz do Brasil ★</span>
                <span>Edição fechada</span>
            </div>
            <div class="masthead-title">Correio da pós-verdade </div>
            <div class="masthead-subtitle">Aggregador de Noticias dos Principaes Jornaes Brazileiros</div>
            <div class="masthead-dateline">
                <span id="dateline-left">Edição Vespertina</span>
                <span id="dateline-date"></span>
                <span>Número {{ noticias|length }}</span>
            </div>
        </div>

        <!-- CONTROLS -->
        <form class="controls" method="get" action="/">
            <label for="busca">Pesquisar:</label>
            <input type="text" name="busca" id="busca" placeholder="Palavra-chave..." value="{{ busca }}">
            <button type="submit">Consultar</button>
        </form>

        <!-- STATS -->
        <div class="stats-bar">
            {% if busca %}
            {{ noticias|length }} resultado(s) para &ldquo;{{ busca }}&rdquo; &mdash; Actualizado nesta edição
            {% else %}
            {{ noticias|length }} despachos telegraphicos recebidos nesta edição &mdash; Actualizado a cada carregamento
            {% endif %}
        </div>

        {% if noticias %}

        <!-- TOP STORY (first article as headline) -->
        {% set top = noticias[0] %}
        <div class="headline-banner">
            <div class="kicker">— Notícia de Destaque —</div>
            <a href="{{ top.link }}" target="_blank" rel="noopener">
                <h2>{{ top.titulo }}</h2>
            </a>
            {% if top.resumo %}
            <p class="deck">{{ top.resumo | striptags | truncate(180) }}</p>
            {% endif %}
            <div
                style="font-family:'IM Fell English SC',serif;font-size:0.65rem;color:var(--ink-faint);margin-top:6px;letter-spacing:0.08em;">
                {{ top.fonte | upper }}{% if top.data %} &mdash; {{ top.data[:25] }}{% endif %}
            </div>
        </div>

        <!-- 3-COLUMN SECTION -->
        {% if noticias|length > 1 %}
        <div class="section-rule">Despachos Telegraphicos</div>
        <div class="columns">
            {% set col_news = noticias[1:] %}
            {% set per_col = ((col_news|length) / 3)|round(0, 'ceil')|int %}

            {% for col_idx in range(3) %}
            <div class="col">
                {% set start = col_idx * per_col %}
                {% set end = start + per_col %}
                {% for noticia in col_news[start:end] %}
                <article class="article {{ 'drop-cap' if loop.first and col_idx == 0 else '' }}">
                    <div class="article-source">{{ noticia.fonte }}</div>
                    <h3><a href="{{ noticia.link }}" target="_blank" rel="noopener">{{ noticia.titulo }}</a></h3>
                    {% if noticia.data %}
                    <div class="byline">Recebido em: {{ noticia.data[:25] }}</div>
                    {% endif %}
                    {% if noticia.resumo %}
                    <p>{{ noticia.resumo | striptags | truncate(200) }}</p>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% else %}
        <div class="empty">
            Nenhum despacho encontrado para esta edição. Tente outro termo ou fonte.
        </div>
        {% endif %}

        <div class="ornament">✦ &nbsp; ✦ &nbsp; ✦</div>

        <!-- FOOTER -->
        <div class="footer">
            <p>O Diário Nacional &mdash; Aggregador de Noticias &mdash; Actualizado a cada edição &mdash; Anno Domini
                MMXXVI</p>
        </div>

    </div>

    <script>
        // Set dateline date in old-style format
        const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
        const now = new Date();
        const days = ['Domingo', 'Segunda-Feira', 'Terça-Feira', 'Quarta-Feira', 'Quinta-Feira', 'Sexta-Feira', 'Sábado'];
        document.getElementById('dateline-date').textContent =
            days[now.getDay()] + ', ' + now.getDate() + ' de ' + months[now.getMonth()] + ' de ' + now.getFullYear();
    </script>
</body>

</html>